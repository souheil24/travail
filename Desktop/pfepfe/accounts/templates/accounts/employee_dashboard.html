{% load static %}
<!DOCTYPE html>
<html lang="fr">
    <head>
        <style>
            .wf-force-outline-none[tabindex="-1"]:focus {
                outline: none;
            }
        </style>
        <style>
            /* Style pour les tables de données - harmonisé avec l'admin dashboard */
            .table-container {
                background-color: rgba(20, 25, 35, 0.7);
                border-radius: 10px;
                overflow: hidden;
                margin-top: 20px;
                margin-left: auto;
                margin-right: auto;
                width: 95%;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }
            
            .data-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .data-table th {
                background-color: rgba(30, 35, 45, 0.8);
                color: #0080ff;
                text-align: left;
                padding: 15px;
                font-weight: 500;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .data-table td {
                padding: 15px;
                color: #fff;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                max-width: 200px;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .data-table tr:hover {
                background-color: rgba(255, 255, 255, 0.05);
            }
            
            .data-table tbody tr:last-child td {
                border-bottom: none;
            }
            
            /* Style pour les boutons des réseaux sociaux */
            .social-btn {
                background-color: #0080ff;
                color: white;
                border: none;
                border-radius: 5px;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .social-btn:hover {
                background-color: #0066cc;
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 128, 255, 0.2);
            }
            
            /* Style pour les titres de section */
            .section-title {
                font-size: 24px;
                font-weight: 600;
                margin-bottom: 20px;
                color: #fff;
            }
            
            /* Style pour les lignes mises en évidence lors de la recherche */
            tr.highlight {
                background-color: rgba(0, 128, 255, 0.2) !important;
                transition: background-color 0.3s ease;
            }
            
            /* Style pour la barre de recherche */
            .search-bar {
                position: relative;
                display: flex;
                align-items: center;
                background-color: rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                padding: 8px 15px;
                width: 250px;
            }
            
            .search-bar input {
                background: transparent;
                border: none;
                color: #fff;
                width: 100%;
                margin-left: 10px;
                outline: none;
            }
            
            .search-bar i {
                color: rgba(255, 255, 255, 0.6);
            }
        
            /* Style for social network sections */
            .section-title {
               font-size: 28px;
               margin-bottom: 20px;
               color: #fff;
            }
        
            .button-container {
               margin-bottom: 20px;
               text-align: right;
            }
        
            .social-btn {
                background-color: #0080ff;
                color: white;
                border: none;
                border-radius: 5px;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
        
            .social-btn:hover {
                background-color: #0066cc;
            }
        
            .table-container {
                background-color: rgba(20, 25, 35, 0.7);
                border-radius: 10px;
                overflow: hidden;
                margin-top: 20px;
                margin-left: auto;   /* Centrage horizontal */
                margin-right: auto;  /* Centrage horizontal */
                width: 95%;
            }
        
            .data-table {
                
                width: 100%;
                border-collapse: collapse;
            }
        
            .data-table th {
                background-color:rgba(30, 35, 45, 0.8);
                color: #0080ff;
                text-align: left;
                padding: 15px;
                font-weight: 500;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
        
            .data-table td {
                padding: 15px;
                color: #fff;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                max-width: 200px;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
        
            .data-table tr:hover {
                background-color: rgba(255, 255, 255, 0.05);
            }
        
            /* Make sure we display Facebook content by default */
            #facebook-content {
                display: block;
            }

            /*pour le profile*/
            .profile-page {
                display: none; /* Par défaut, la page est masquée */
                padding: 20px;
                background-color: #000000; /* Couleur de fond */
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }

            .profile-container {
                max-width: 800px;
                margin: 0 auto; /* Centrer horizontalement */
                background-color: rgba(0, 0, 0, 0.7); /* Noir transparent */
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
                border: 1px solid #0080ff; /* Bordure bleue */
            }

            .profile-header {
                display: flex;
                align-items: center;
                margin-bottom: 20px;
            }

            .profile-pic-container {
                position: relative;
                width: 100px;
                height: 100px;
                margin-right: 20px;
            }

            .profile-pic {
                width: 100%;
                height: 100%;
                border-radius: 50%; /* Cercle */
                object-fit: cover;
                border: 2px solid #0080ff; /* Bordure bleue */
            }  

            .change-pic-overlay {
                position: absolute;
                bottom: 0;
                right: 0;
                background-color: rgba(0, 0, 0, 0.6);
                color: #fff;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
            }

            #file-input {
                display: none; /* Masque l'élément */
            }
            
            .save-btn {
                background-color: #000; /* Fond noir */
                color: #fff; /* Texte blanc */
                border: 1px solid #0080ff;; /* Bordure bleu fluo */
                border-radius: 5px; /* Coins arrondis */
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
                transition: all 0.3s ease; /* Transition pour un effet au survol */
            }
            
            .save-btn:hover {
                background-color: #0080ff; /* Fond bleu fluo au survol */
                color: #000; /* Texte noir au survol */
                border-color: #0080ff; /* Bordure bleu foncé au survol */
            }

            .back-btn {
                background-color: #000; /* Fond noir */
                color: #fff; /* Texte blanc */
                border: 1px solid #0080ff; /* Bordure bleue */
                border-radius: 5px;
                padding: 8px 15px;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .back-btn:hover {
                background-color: #0080ff; /* Fond bleu au survol */
                color: #000; /* Texte noir au survol */
            }

            .back-button-container {
                display: flex;
                justify-content: flex-start;
            }
     </style>
        <meta charset="utf-8">
        <title>SentiSort AI - HTML website template</title>
        <meta
            content="Boost productivity with our AI-powered SaaS app featuring smart data input, automation workflow tools, and advanced analytics. Optimize your workflow and make data-driven decisions effortlessly."
            name="description">
        <meta content="width=device-width, initial-scale=1" name="viewport">
    
        <link
            href="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/css/get-neuraflow.webflow.shared.4b6723de5.css"
            rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com" rel="preconnect">
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sora:regular,500,600,700,800" media="all">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <script type="text/javascript">WebFont.load({ google: { families: ["Sora:regular,500,600,700,800"] } });</script>
        <script
            type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
        <link href="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/67f251b8af6e43269dcabdaf_favicon.png"
            rel="shortcut icon" type="image/x-icon">
        <link href="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/67f251ef10db00cd6a155308_webclip.png"
            rel="apple-touch-icon">
        <style type="text/css" id="operaUserStyle"></style>
        <link rel="stylesheet" href="{% static 'accounts/style_4.css' %}">
        
    
    </head>
<body>
    <!-- Barre latérale -->
    <div class="sidebar">
        <div class="logo">
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="8" fill="#0080ff"/>
                <circle cx="24" cy="12" r="8" fill="#666666"/>
                <circle cx="12" cy="24" r="8" fill="#444444"/>
                <circle cx="24" cy="24" r="8" fill="#888888"/>
            </svg>
            <span class="logo-text">SentiSort</span>
        </div>
        
        <!-- Menu réseaux sociaux -->
        <div class="menu-item active" data-page="facebook">
            <i class="fab fa-facebook"></i>
            <span>Facebook</span>
        </div>
        
        <div class="menu-item" data-page="linkedin">
            <i class="fab fa-linkedin"></i>
            <span>LinkedIn</span>
        </div>
        
        <div class="menu-item" data-page="twitter">
            <img src="{% static 'icons/x-logo.png' %}" alt="X" style="width: 20px; height: 20px;">
            <span>X</span>
        </div>
        
        <div class="menu-item" data-page="youtube">
            <i class="fab fa-youtube"></i>
            <span>YouTube</span>
        </div>
    </div>
    
    <!-- Contenu principal -->
    <div class="main-content">
        <!-- Header rétractable -->
        <div class="header">
            <div class="logo">
                <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="8" fill="#0080ff"/>
                    <circle cx="24" cy="12" r="8" fill="#666666"/>
                    <circle cx="12" cy="24" r="8" fill="#444444"/>
                    <circle cx="24" cy="24" r="8" fill="#888888"/>
                </svg>
                <span class="logo-text">SentiSort</span>
            </div>
            
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" id="global-search" placeholder="Rechercher..." onkeyup="searchContent()">
            </div>
            <div class="user-dropdown">
                <div class="user-trigger">
                    <!-- Remplacez ceci par votre image ou username -->
                    <div class="photo-profile d-flex align-items-center">
                        <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'accounts/employee_image.jpg' %}{% endif %}" class="rounded-2"
                            style="width: 40px; height: 40px; object-fit: cover; margin-right: 10px; border-radius: 8px;">
                        <div class="user-info">
                            <span class="role">
                                {% if user.is_superuser %}
                                Admin
                                {% elif user.is_employee %}
                                Employé
                                {% else %}
                                Utilisateur
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>

                <div class="dropdown-content">
                    <a href="#me-content" class="dropdown-item">Profile</a>
                    <a href="{% url 'logout' %}" class="dropdown-item">Logout</a>
                </div>
            </div>
            
            
        </div>

        
        
        <!-- Pages des réseaux sociaux -->
        <div id="facebook-page" class="social-page active">
            <h1 class="section-title">Analyse Facebook</h1>
            
            <!-- Bouton unique aligné à gauche -->
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="facebook_data" value="1">
                <input type="hidden" name="active_tab" value="facebook">
                <button type="submit" class="social-btn">Lancer l'analyse</button>
            </form>
            
            
            <!-- Conteneur avec fond semi-transparent pour le tableau -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            
                            <th>Media</th>
                            <th>ID Commentateur</th>
                            <th>Commentaire</th>
                            <th>Like du commentaire</th>
                            <th>Like du post</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in facebook_data %}
                        <tr>
                            
                            <td>
                                {% if item.media_url %}
                                    <img src="{{ item.media_url }}" width="60">
                                {% else %}
                                    Aucun
                                {% endif %}
                            </td>
                            <td title="{{ item.comment_id }}">
                                {{ item.comment_id|slice:":10" }}...
                            </td>
                            <td>{{ item.comment_text }}</td>
                            <td>{{ item.comment_likes }}</td>
                            <td>{{ item.post_likes }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 20px;">Aucune donnée disponible</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="linkedin-page" class="social-page">
            <h1 class="section-title">Analyse LinkedIn</h1>
            
            <!-- Bouton unique aligné à gauche -->
            <div class="social-buttons">
                <form method="post" action="{% url 'etape1_linkedin' %}">
                    {% csrf_token %}
                    <input type="hidden" name="active_tab" value="linkedin">
                    <button type="submit" class="social-btn">Lancer l'analyse</button>
                </form>
            </div>
            
            <!-- Conteneur avec fond semi-transparent pour le tableau -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID Post</th>
                            <th>Contenu</th>
                            <th>Commentaires</th>
                            <th>J'aime</th>
                            <th>Repostes</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for post in linkedin_data %}
                        <tr>
                            <td>{{ post.id_poste }}</td>
                            <td>{{ post.contenue }}</td>
                            <td>
                                <ul>
                                    {% for comment in post.comments_set.all %}
                                    <li><strong>{{ comment.nom }}</strong> : {{ comment.texte }}</li>
                                    {% empty %}
                                    <li>Aucun commentaire</li>
                                    {% endfor %}
                                </ul>
                            </td>
                            <td>{{ post.nombre_jaime }}</td>
                            <td>{{ post.nombre_republication }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 20px;">Aucune donnée disponible</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="twitter-page" class="social-page">
            <h1 class="section-title">Analyse X</h1>
            
            <!-- Boutons alignés à gauche -->
            <div class="social-buttons">
                <button class="social-btn">Lancer l'analyse</button>
            </div>
            
            <!-- Conteneur avec fond semi-transparent pour le tableau -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID Tweet</th>
                            <th>Contenu</th>
                            <th>ID Tweeter</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in twitter_data %}
                        <tr>
                            <td>{{ item.tweet_id }}</td>
                            <td>{{ item.text }}</td>
                            <td>{{ item.author_id }}</td>
                            <td>{{ item.created_at }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 20px;">Aucune donnée disponible</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="youtube-page" class="social-page">
            <h1 class="section-title">Analyse YouTube</h1>
            
            <!-- Boutons alignés à gauche -->
            <div class="social-buttons">
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="youtube_data" value="1">
                    <input type="hidden" name="active_tab" value="youtube">
                    <button type="submit" class="social-btn">Lancer l'analyse</button>
                </form>
            </div>
            
            <!-- Conteneur avec fond semi-transparent pour le tableau -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID Vidéo</th>
                            <th>Titre</th>
                            <th>Vues</th>
                            <th>J'aime</th>
                            <th>Commentaires</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in youtube_data %}
                        <tr>
                            <td>{{ item.video_id }}</td>
                            <td>{{ item.title }}</td>
                            <td>{{ item.views }}</td>
                            <td>{{ item.likes_video }}</td>
                            <td>{{ item.comment_text }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 20px;">Aucune donnée disponible</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Page profil -->
        <div id="profile-page" class="profile-page">
            <div class="profile-container">
                <!-- Ajout du bouton Retour en haut de la page profil -->
                <div class="back-button-container" style="margin-bottom: 20px;">
                   <button id="back-to-dashboard" class="back-btn">
                       <i class="fas fa-arrow-left"></i> Retour
                   </button>
                </div>
                <div class="profile-header">
                    <div class="profile-pic-container">
                        <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'accounts/employee_image.jpg' %}{% endif %}" class="profile-pic">
                        <label for="file-input" class="change-pic-overlay">
                            <i class="fas fa-camera"></i>
                        </label>
                        <form id="profile-image-form" method="POST" action="{% url 'update_profile_image' %}" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="file" id="file-input" name="profile_image" accept="image/*" onchange="this.form.submit()">
                        </form>
                    </div>
                    <div class="profile-info">
                        <h2 class="profile-name">{{ employee.username }}</h2>
                        <p class="profile-email">{{ employee.email }}</p>
                    </div>
                </div>
                
                <div class="profile-form">
                    <form id="profile-form" method="POST" action="{% url 'update_profile' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <label class="form-label">Nom complet</label>
                            <input type="text" class="form-input" name="username" value="{{ user.username }}">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" name="email" value="{{ user.email }}">
                        </div>
                        
                        <div class="form-group">
                            <button type="submit" class="save-btn">Enregistrer les modifications</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Gestion du header rétractable
        const header = document.querySelector('.header');
        let lastScrollTop = 0;
        
        document.querySelector('.main-content').addEventListener('scroll', () => {
            const scrollTop = document.querySelector('.main-content').scrollTop;
            
            if (scrollTop > lastScrollTop && scrollTop > 50) {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop;
        });
        
        // Gestion des menus de navigation
        const menuItems = document.querySelectorAll('.menu-item');
        const socialPages = document.querySelectorAll('.social-page');
        const profilePage = document.getElementById('profile-page');
        
        function hideAllPages() {
            profilePage.style.display = 'none';
            socialPages.forEach(page => {
                page.style.display = 'none';
                page.classList.remove('active');
            });
            
            menuItems.forEach(item => {
                item.classList.remove('active');
            });
        }
        
        menuItems.forEach(item => {
            if (item.hasAttribute('data-page')) {
                item.addEventListener('click', () => {
                    const pageName = item.getAttribute('data-page');
                    hideAllPages();
                    const targetPage = document.getElementById(`${pageName}-page`);
                    targetPage.style.display = 'block';
                    targetPage.classList.add('active');
                    item.classList.add('active');
                });
            }
        });
        
        // Gestion du profil
        document.querySelector('.dropdown-item[href="#me-content"]').addEventListener('click', (e) => {
            e.preventDefault();
            hideAllPages();
            profilePage.style.display = 'block';
        });

        // Ajoutez ce code à votre section script existante
        document.getElementById('back-to-dashboard').addEventListener('click', function() {
            // Cacher la page de profil
            document.getElementById('profile-page').style.display = 'none';
    
            // Afficher la page Facebook par défaut
            document.getElementById('facebook-page').style.display = 'block';
            document.getElementById('facebook-page').classList.add('active');
            document.querySelector('[data-page="facebook"]').classList.add('active');
        });
        
        // Initialisation: afficher la page Facebook par défaut
        hideAllPages();
        document.getElementById('facebook-page').style.display = 'block';
        document.getElementById('facebook-page').classList.add('active');
        document.querySelector('[data-page="facebook"]').classList.add('active');
    </script>
    <script>
        // Ajoutez ce code à votre section script existante
        document.addEventListener('DOMContentLoaded', function() {
            // Référence au formulaire d'upload d'image
            const profileImageForm = document.getElementById('profile-image-form');
            const fileInput = document.getElementById('file-input');
            
            if (fileInput) {
                fileInput.addEventListener('change', function(e) {
                    if (this.files && this.files[0]) {
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            // Mettre à jour l'image du profil
                            const profilePic = document.querySelector('.profile-pic');
                            if (profilePic) {
                                profilePic.src = e.target.result;
                            }
                            
                            // Mettre à jour l'image de l'en-tête
                            const headerPic = document.querySelector('.photo-profile img');
                            if (headerPic) {
                                headerPic.src = e.target.result;
                            }
                            
                            // Soumettre le formulaire pour sauvegarder l'image
                            profileImageForm.submit();
                        };
                        
                        reader.readAsDataURL(this.files[0]);
                    }
                });
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gestionnaire pour le sous-menu "Ajouter Post"
            const addPostMenuItem = document.querySelector('.submenu-item[data-section="facebook-add-post"]');
            
            if (addPostMenuItem) {
                addPostMenuItem.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Masquer TOUTES les sections du dashboard
                    document.querySelectorAll('.dashboard-section').forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Afficher UNIQUEMENT la section d'ajout de post
                    const addPostSection = document.getElementById('facebook-add-post');
                    if (addPostSection) {
                        addPostSection.style.display = 'block';
                    }
                    
                    // Activer l'élément de menu Facebook
                    document.querySelectorAll('.menu-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelector('.menu-item[data-page="facebook"]').classList.add('active');
                    
                    // Activer l'élément du sous-menu
                    document.querySelectorAll('.submenu-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            }
            
            // Prévisualisation de l'image
            const imageInput = document.getElementById('image');
            const imagePreview = document.getElementById('image-preview');
            
            if (imageInput && imagePreview) {
                imageInput.addEventListener('change', function() {
                    imagePreview.innerHTML = ''; // Vider la prévisualisation
                    
                    if (this.files && this.files[0]) {
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            imagePreview.appendChild(img);
                        };
                        
                        reader.readAsDataURL(this.files[0]);
                    }
                });
            }
            
            // Gestion du formulaire
            const facebookPostForm = document.getElementById('facebook-post-form');
            if (facebookPostForm) {
                facebookPostForm.addEventListener('submit', function(e) {
                    // Vous pouvez ajouter une validation ici si nécessaire
                    
                    // Afficher un indicateur de chargement
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Publication en cours...';
                    submitBtn.disabled = true;
                    
                    // Le formulaire sera soumis normalement
                });
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion du sous-menu Facebook
            const facebookMenuItem = document.querySelector('.menu-item[data-page="facebook"]');
            const facebookSubmenu = document.getElementById('facebook-submenu');
            
            // Ouvrir/fermer le sous-menu au clic
            facebookMenuItem.addEventListener('click', function(e) {
                e.stopPropagation(); // Empêcher la propagation pour éviter de déclencher d'autres événements
                
                // Toggle la classe expanded pour l'icône
                this.classList.toggle('expanded');
                
                // Toggle la classe active pour le sous-menu
                facebookSubmenu.classList.toggle('active');
            });
            
            // Gestion des clics sur les éléments du sous-menu
            const submenuItems = document.querySelectorAll('.submenu-item');
            submenuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.stopPropagation(); // Empêcher la propagation
                    
                    // Désactiver tous les éléments du sous-menu
                    submenuItems.forEach(i => i.classList.remove('active'));
                    
                    // Activer l'élément cliqué
                    this.classList.add('active');
                    
                    // Récupérer la section à afficher
                    const sectionId = this.getAttribute('data-section');
                    
                    // Masquer toutes les sections Facebook
                    document.querySelectorAll('.facebook-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Afficher la section sélectionnée
                    document.getElementById(sectionId).classList.add('active');
                    
                    // S'assurer que la section Facebook principale est visible
                    hideAllSections();
                    document.getElementById('facebook-content').style.display = 'block';
                    facebookMenuItem.classList.add('active');
                });
            });
            
            // Gestion des boutons "Voir les commentaires"
            const viewCommentsBtns = document.querySelectorAll('.view-comments-btn');
            viewCommentsBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const postId = this.getAttribute('data-post-id');
                    const commentsSection = document.getElementById(`comments-${postId}`);
                    
                    if (commentsSection.style.display === 'none') {
                        commentsSection.style.display = 'block';
                        this.textContent = `Masquer les commentaires`;
                    } else {
                        commentsSection.style.display = 'none';
                        this.textContent = `Voir les commentaires (${this.getAttribute('data-comments-count')})`;
                    }
                });
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Fonction pour gérer les clics sur les éléments du sous-menu Facebook
            function handleFacebookSubmenuClick(sectionId) {
                // Masquer TOUTES les sections du dashboard
                document.querySelectorAll('.dashboard-section').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Déterminer quelle section afficher en fonction de l'ID de section
                if (sectionId === 'facebook-add-post') {
                    // Afficher la section d'ajout de post
                    document.getElementById('facebook-add-post').style.display = 'block';
                } else {
                    // Pour "facebook-comments" et "facebook-posts", afficher la section d'analyse Facebook
                    document.getElementById('facebook-content').style.display = 'block';
                }
                
                // Activer l'élément de menu Facebook
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('.menu-item[data-page="facebook"]').classList.add('active');
                
                // Activer l'élément du sous-menu correspondant
                document.querySelectorAll('.submenu-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`.submenu-item[data-section="${sectionId}"]`).classList.add('active');
            }
            
            // Attacher les gestionnaires d'événements à tous les éléments du sous-menu
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const sectionId = this.getAttribute('data-section');
                    handleFacebookSubmenuClick(sectionId);
                });
            });
        });
    </script>
      <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6735ec32acab9d477bc254a6"
      type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>
  <script src="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/js/webflow.schunk.c738037d7abc829e.js"
      type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/js/webflow.schunk.6f8bebc185dfbea4.js"
      type="text/javascript"></script>
  <script src="https://cdn.prod.website-files.com/6735ec32acab9d477bc254a6/js/webflow.6bb3ff14.59c5c2bd42ca13f1.js"
      type="text/javascript"></script>
</body>
</html>
<script>
    // Définir les indices de colonnes pour chaque tableau
    window.tableColumnIndices = {
        'facebook-page': 3,  // Colonne "Commentaire" dans le tableau Facebook
        'youtube-page': 4,   // Colonne "Commentaires" dans le tableau YouTube
        'twitter-page': 1,   // Colonne "Contenu" dans le tableau Twitter
        'linkedin-page': 1   // Colonne "Contenu" dans le tableau LinkedIn
    };

    function searchContent() {
        const searchText = document.getElementById('global-search').value.toLowerCase();
        
        // Déterminer quelle section est actuellement visible
        let activeSection = null;
        document.querySelectorAll('.social-page').forEach(page => {
            if (page.classList.contains('active')) {
                activeSection = page.id;
            }
        });
        
        // Si aucune section n'est active ou si le texte de recherche est vide, ne rien faire
        if (!activeSection) {
            return;
        }
        
        // Réinitialiser tous les tableaux si le texte de recherche est vide
        if (searchText === '') {
            resetAllTables();
            return;
        }
        
        // Effectuer la recherche en fonction de la section active
        if (window.tableColumnIndices[activeSection] !== undefined) {
            searchTable(activeSection);
        }
    }

    function searchTable(sectionId, columnIndexOverride) {
        const columnIndex = columnIndexOverride || window.tableColumnIndices[sectionId];
        const searchText = document.getElementById('global-search').value.toLowerCase();
        
        // Sélectionner la table appropriée
        const table = document.querySelector(`#${sectionId} .data-table`);
        
        if (!table) return;
        
        const rows = table.querySelectorAll('tbody tr');
        
        rows.forEach(row => {
            const cell = row.cells[columnIndex];
            if (!cell) return;
            
            const content = cell.textContent.toLowerCase();
            
            if (content.includes(searchText)) {
                row.style.display = '';
                row.classList.add('highlight');
            } else {
                row.style.display = 'none';
                row.classList.remove('highlight');
            }
        });
    }

    function resetAllTables() {
        // Réinitialiser toutes les tables
        document.querySelectorAll('.data-table tbody tr').forEach(row => {
            row.style.display = '';
            row.classList.remove('highlight');
        });
    }

    // Initialiser la recherche lorsque la page est chargée
    document.addEventListener('DOMContentLoaded', function() {
        // Ajouter un événement pour réinitialiser la recherche lors du changement de section
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                // Vider le champ de recherche
                document.getElementById('global-search').value = '';
                // Réinitialiser tous les tableaux
                resetAllTables();
            });
        });
    });
</script>
